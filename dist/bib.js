!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.webpackNumbers=t():e.webpackNumbers=t()}(this,function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=13)}([function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};t.isElement=function(e){var t=void 0;t="object"===("undefined"==typeof HTMLElement?"undefined":r(HTMLElement))?e instanceof HTMLElement:!!e&&"object"===(void 0===e?"undefined":r(e))&&1===e.nodeType&&"string"==typeof e.nodeName;return t}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=function(e,t,n){var r=e[t];Object.defineProperty(e,t,{set:function(e){n(r=e)},get:function(){return r}})},t.strip=function(e){return(new DOMParser).parseFromString(e,"text/html").body.textContent||""}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getParents=function(e){var t=[],n=e;for(;(0,r.isElement)(n);)t.push(n),n=n.parentNode;return t};var r=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isUnique=function(e,t){if(!Boolean(t))return!1;var n=e.ownerDocument.querySelectorAll(t);return 1===n.length&&n[0]===e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTag=function(e){return e.tagName.toLowerCase().replace(/:/g,"\\:")}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getNthChild=function(e){var t=0,n=void 0,o=void 0,i=e.parentNode;if(Boolean(i)){var a=i.childNodes,u=a.length;for(n=0;n<u;n++)if(o=a[n],(0,r.isElement)(o)&&(t++,o===e))return":nth-child("+t+")"}return null};var r=n(0)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAttributes=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:["id","class","length"],n=e.attributes;return[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n)).reduce(function(e,n){return t.indexOf(n.nodeName)>-1||e.push("["+n.nodeName+'="'+n.value+'"]'),e},[])}},function(e,t,n){"use strict";function r(e,t,n,o,i,a,u){if(a!==u)for(var l=o;l<=i&&i-l+1>=u-a;++l)n[a]=t[l],r(e,t,n,l+1,i,a+1,u);else e.push(n.slice(0,a).join(""))}Object.defineProperty(t,"__esModule",{value:!0}),t.getCombinations=function(e,t){for(var n=[],o=e.length,i=[],a=1;a<=t;++a)r(n,e,i,0,o-1,0,a);return n}},function(e,t,n){"use strict";function r(e){if(!e.hasAttribute("class"))return[];try{return Array.prototype.slice.call(e.classList)}catch(n){var t=e.getAttribute("class");return(t=t.trim().replace(/\s+/g," ")).split(" ")}}Object.defineProperty(t,"__esModule",{value:!0}),t.getClasses=r,t.getClassSelectors=function(e){return r(e).filter(Boolean).map(function(e){return"."+e})}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getID=function(e){var t=e.getAttribute("id");if(null!==t&&""!==t)return"#"+t;return null}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.selectorTypes,r=void 0===n?["ID","Class","Tag","NthChild"]:n,o=t.attributesToIgnore,i=void 0===o?["id","class","length"]:o,a=[],u=(0,c.getParents)(e),l=!0,f=!1,d=void 0;try{for(var h,v=u[Symbol.iterator]();!(l=(h=v.next()).done);l=!0){var m=h.value,b=g(m,r,i);Boolean(b)&&a.push(b)}}catch(e){f=!0,d=e}finally{try{!l&&v.return&&v.return()}finally{if(f)throw d}}var y=[],p=!0,w=!1,k=void 0;try{for(var M,_=a[Symbol.iterator]();!(p=(M=_.next()).done);p=!0){var C=M.value;y.unshift(C);var N=y.join(" > ");if((0,s.isUnique)(e,N))return N}}catch(e){w=!0,k=e}finally{try{!p&&_.return&&_.return()}finally{if(w)throw k}}return null};var r=n(9),o=n(8),i=n(7),a=n(6),u=n(5),l=n(4),s=n(3),c=n(2);function f(e,t){var n=e.parentNode.querySelectorAll(t);return 1===n.length&&n[0]===e}function d(e,t){return t.find(f.bind(null,e))}function h(e,t,n){var r=(0,i.getCombinations)(t,3),o=d(e,r);return Boolean(o)?o:Boolean(n)&&(o=d(e,r=r.map(function(e){return n+e})),Boolean(o))?o:null}function g(e,t,n){var i=void 0,s=function(e,t,n){var i={Tag:l.getTag,NthChild:u.getNthChild,Attributes:function(e){return(0,a.getAttributes)(e,n)},Class:o.getClassSelectors,ID:r.getID};return t.reduce(function(t,n){return t[n]=i[n](e),t},{})}(e,t,n),c=!0,d=!1,g=void 0;try{for(var v,m=t[Symbol.iterator]();!(c=(v=m.next()).done);c=!0){var b=v.value,y=s.ID,p=s.Tag,w=s.Class,k=s.Attributes,M=s.NthChild;switch(b){case"ID":if(Boolean(y)&&f(e,y))return y;break;case"Tag":if(Boolean(p)&&f(e,p))return p;break;case"Class":if(Boolean(w)&&w.length&&(i=h(e,w,p)))return i;break;case"Attributes":if(Boolean(k)&&k.length&&(i=h(e,k,p)))return i;break;case"NthChild":if(Boolean(M))return M}}}catch(e){d=!0,g=e}finally{try{!c&&m.return&&m.return()}finally{if(d)throw g}}return"*"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.default=function(e){return l||(l=new o(e),window.hh=l,l)};var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.$store=t,window.store=t}return r(e,[{key:"highlightRange",value:function(e,t,n){var r=void 0;r=e||this.$store.highlightColor;var o=this.selection,a=this.document;o.removeAllRanges(),o.addRange(t);var u=this.getLocation();return n||(n="guid-"+i()+i()),a.designMode="on",a.execCommand("HiliteColor",!1,r),"transparent"!==r?a.execCommand("createLink",!1,'javascript:window.top.destroyHighlight("'+n+'")'):a.execCommand("unlink",!1),a.designMode="off",u.endLocation=this.getLocation(),u.guid=n,u}},{key:"highlight",value:function(e){var t=this.selection,n=void 0;if(n=e||this.$store.highlightColor,t.baseNode){t.baseNode.parentElement.style.backgroundColor===e&&(n="transparent");var r=t.getRangeAt(0);return this.highlightRange(n,r)}}},{key:"getLocation",value:function(){var e=this.window.getSelection().getRangeAt(0),t=u(e.startContainer),n=u(e.endContainer);return t.offset=e.startOffset,e.startContainer===e.endContainer?n.offset=t.offset+e.toString().length:n.offset=e.endOffset,{start:t,end:n,textContent:e.toString()}}},{key:"createRange",value:function(e,t){var n=this.findEl(e),r=this.findEl(t);if(n&&r){window.doc=this.document;var o=n.childNodes[e.index],i=r.childNodes[t.index],u=document.createRange(),l=a(o,e),s=a(i,t);return u.setStart(o,l),u.setEnd(i,s),u}}},{key:"findEl",value:function(e){return function(e,t){for(var n=t.querySelectorAll(e.tagName),r=0;r<n.length;r++)if(n[r].outerHTML===e.outerHTML)return n[r]}(e,this.document)}},{key:"markHighlights",value:function(){var e=this.$store.highlights,t=this.$store.destroyedHighlights;this.markSelectedHighlights(e),this.markSelectedHighlights(t,"transparent")}},{key:"markSelectedHighlights",value:function(e,t){var n=this;e.forEach(function(e){if(e.location.chapterName===n.$store.lastLocation.chapterName){var r=e.range&&e.range.anchorNode?e.range:n.createRange(e.start,e.end);r&&(n.highlightRange(t,r,e.guid),e.range=n.selection.getRangeAt(0),n.selection.removeAllRanges())}})}},{key:"releaseSelection",value:function(){this.selection.removeAllRanges()}},{key:"window",get:function(){return e=document.querySelector("iframe"),e?e.contentWindow:window;var e}},{key:"document",get:function(){return this.window.document}},{key:"selection",get:function(){return this.window.getSelection()}}]),e}();function i(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function a(e,t){return e.length<t.offset?e.length-1:t.offset}function u(e){var t=e.parentElement;return{tagName:t.tagName,className:t.className,index:function(e,t){for(var n=0;n<e.childNodes.length;n++)if(e.childNodes[n]===t)return n}(t,e),outerHTML:t.outerHTML}}var l=void 0;e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(1);t.default={init:function(e){(0,r.observe)(e,"searchTerm",function(t){if(function(){for(var e=document.querySelectorAll("mark.bib-sr-mark"),t=0;t<e.length;t++)e[t].outerHTML=e[t].innerHTML;for(var n=document.querySelectorAll("a.bib-sr-anchor"),r=0;r<n.length;r++)n[r].parentElement.removeChild(n[r])}(),e.searchResults.splice(0,e.searchResults.length),!(t.length<4)){var n=new RegExp(t,"ig"),o=0,i=document.body.innerHTML;document.body.innerHTML=document.body.innerHTML.replace(n,function(t){if(-1!==t.indexOf(">")||-1!==t.indexOf("<"))return t;var n=arguments[arguments.length-2];return e.searchResults.push({id:"sr-"+o,shortResult:function(e,t){var n=t-60>=0?t-60:0,o=t+60<=e.length?t+60:e.length,i=e.substring(n,o);return(0,r.strip)(i)}(i,n)}),'<a id="bib-sr-'+o+++'" class="bib-sr-anchor"></a><mark class="bib-sr-mark">'+t+"</mark>"})}})}},e.exports=t.default},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});n(1);var r=a(n(12)),o=a(n(11)),i=a(n(10));function a(e){return e&&e.__esModule?e:{default:e}}var u={bookmarks:[],searchResults:[],searchTerm:"",scrollY:0,createBookmark:function(){var e="#bib-bm"+(new Date).getTime(),t=window.scrollY,n=t/document.body.offsetHeight,r=function(){for(var e=document.body.clientWidth/2,t=0;t<400;t+=10){var n=document.elementFromPoint(e,t);if(n&&!(n instanceof HTMLHtmlElement)&&n!==document.body)return n}return document.body}(),o=function(e){document.querySelectorAll("h2").forEach(function(e){return e.className="chapter"});var t=document.getElementsByClassName("chapter");if(0===t.length)return document.createElement("div");for(var n=0;t.length-1;n++)if(t[n].offsetTop>e.offsetTop&&n>0)return t[n-1];return t[t.length-1]}(r);u.bookmarks.push({hash:e,scrollY:t,percentage:n,chapter:o.textContent.trim(),selector:(0,i.default)(r)})},hightlights:[],lastLocation:{}};(0,o.default)(u);r.default.init(u),window.destroyHighlight=function(e){Dialog.create({title:"Delete highlight?",ok:{push:!0,label:"Yes"},cancel:!0}).then(function(){store.commit("destroyHighlight",{guid:e}),new HighlightManager(store).markHighlights()})},window.onhashchange=function(){var e=window.location.hash;1===e.indexOf("bib-bm")&&function(e){for(var t=0;t<u.bookmarks.length;t++)if(u.bookmarks[t].hash===e)return void window.scrollTo(0,u.bookmarks[t].scrollY)}(e)},window&&(window.bib=u),t.default=u,e.exports=t.default}])});